{"version":3,"file":"static/webpack/static/development/pages/profile.js.0c425cb712cd2c48c09d.hot-update.js","sources":["webpack:///./pages/profile.js"],"sourcesContent":["\n\nimport { useState, useEffect, useContext } from 'react';\n\n// context imports\nimport { UserContext } from '../contexts/userContext';\n\n// Style imports\nimport { MASTER } from '../styles/masterStyles';\n\n// Component imports\nimport Layout from '../components/Layout';\n\nconst EditUser = (props) => {\n\n    const { user, storeUser, logout } = useContext(UserContext);\n\n\n    const [userID, setUserID] = useState(user.user_id);\n    const [userName, setUserName] = useState(user.userName);\n    const [email, setEmail] = useState(user.email);\n    const [password, setPassword] = useState('');\n    const [confirmPassword, setConfirmPassword] = useState('');\n\n    useEffect(() => {\n        if(user && user._id){\n            setUserID(user._id);\n            setUserName(user.userName);\n            setEmail(user.email);\n        }\n    },[user]);\n\n    const openWarning = (message) => {\n        alert(\n            `Woah there! ${message}`,\n        );\n    }\n\n    const validEmail = email => {\n        var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return re.test(String(email).toLowerCase());\n    }\n\n    const updateUser = async () => {\n        if(!userName){\n            openWarning('Must have a username!');\n            return;\n        }\n        if(!email || !validEmail(email)){\n            openWarning('Must have a valid email!');\n            return;\n        }\n        if(password && password !== confirmPassword){\n            openWarning('Passwords must match!');\n            return;\n        }\n        console.log({userID})\n        try {\n            const request = await fetch(`http://localhost:8000/users/${userID}`, {\n                method: 'PATCH',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json',\n                  'Authorization': `Bearer ${localStorage.getItem('bingo_token')}`\n                },\n                body: JSON.stringify({\n                    _id: userID,\n                    userName,\n                    email,\n                    password,\n                    role: {\n                        org: props.orgID,\n                        level: 2\n                    },\n                })\n              })\n              const user = await request.json();\n              console.log('from backend', {user})\n              if(user && user._id){\n                storeUser(user);\n              } else {\n                  alert('There was a problem creating this user...');\n              }\n        } catch (err) { alert( err ) }\n    }\n\n    const deleteUser = async () => {\n        if(confirm(`Are you sure? This will delete ${userName} forever!`)){\n            try {\n                const request = await fetch(`http://localhost:8000/users/${userID}`, {\n                    method: 'DELETE',\n                    headers: {\n                      'Accept': 'application/json',\n                      'Content-Type': 'application/json',\n                      'Authorization': `Bearer ${localStorage.getItem('bingo_token')}`\n                    },\n                  })\n                  const response = await request.json();\n                  if(response && response._id){\n                    logout()\n                  } else {\n                      alert('There was a problem deleting this user...');\n                  }\n            } catch (err) { alert( err ) }\n        }\n    }\n\n\n    return (\n        <Layout>\n            <div style={styles.container}>\n                <div style={{ ...MASTER.pageTitle, alignSelf: 'flex-start' }}>MY PROFILE</div>\n                <div style={styles.subcontainer}>\n                    <input \n                        style={MASTER.wideRoundInput} \n                        value={userName} \n                        onChange={e => setUserName(e.target.value)} \n                        placeholder={'User Name'}\n                    />\n                    <input \n                        style={MASTER.wideRoundInput} \n                        value={email} \n                        onChange={e => setEmail(e.target.value)} \n                        placeholder={'Email'}\n                    />\n                    <input \n                        style={MASTER.wideRoundInput} \n                        value={password} \n                        onChange={e => setPassword(e.target.value)} \n                        type='password'\n                        placeholder={'New Password'}\n                    />\n                    <input \n                        style={MASTER.wideRoundInput} \n                        value={confirmPassword} \n                        onChange={e => setConfirmPassword(e.target.value)} \n                        type='password'\n                        placeholder={'Confirm New Password'}\n                    />\n                    <div style={{ width: '100%', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n                        {/* <button \n                            style={{ ...MASTER.wideRoundBtn, backgroundColor: 'red', marginTop: 20 }} \n                            onClick={() => deleteUser(user._id)}\n                        >\n                            <span style={MASTER.wideRoundBtnText}>Delete User</span>\n                        </button> */}\n                        <button \n                            style={{ ...MASTER.wideRoundBtn, marginTop: 20 }} \n                            onClick={() => updateUser()}\n                        >\n                            <span style={MASTER.wideRoundBtnText}>Save</span>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </Layout>\n    )\n  };\n\n  const styles = {\n    container: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n        height: '100%',\n        paddingBottom: 10,\n        minWidth: 300\n    },\n    subcontainer: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        width: '100%',\n        height: '100%',\n        maxWidth: 400,\n        marginTop: 50,\n    }\n}\n  \n  export default EditUser;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AANA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AASA;AAVA;AACA;AADA;AAaA;AAAA;AAAA;AAbA;AAAA;AAAA;AAgBA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AALA;AAPA;AACA;AAhBA;AAeA;AAfA;AAAA;AACA;AADA;AAiCA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAxCA;AAAA;AACA;AADA;AAAA;AAAA;AAwCA;AACA;AAzCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AA0CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AAHA;AAFA;AACA;AAJA;AAGA;AAHA;AAAA;AACA;AADA;AAWA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAjBA;AAAA;AACA;AADA;AAAA;AAAA;AAiBA;AACA;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAqBA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AAAA;AAAA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AAAA;AAAA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AAAA;AAAA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAXA;AAsBA;;;;A","sourceRoot":""}