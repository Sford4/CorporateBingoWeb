{"version":3,"file":"static/webpack/static/development/pages/forgotPassword.js.0ebc7b5d6c3a21bb8e35.hot-update.js","sources":["webpack:///./pages/forgotPassword.js"],"sourcesContent":["import { useState, useEffect, useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport fetch from 'isomorphic-unfetch';\nimport FULL_URL from '../constants/constants';\n\n// context imports\nimport { UserContext } from '../contexts/userContext';\n\n// Style imports\nimport { MASTER } from '../styles/masterStyles';\n\nconst ForgotPassword = () => {\n\n    const { user } = useContext(UserContext);\n\n    const router = useRouter()\n\n    const [email, setEmail] = useState('');\n  const [confirmationMessage, setConfirmationMessage] = useState(false);\n\n    useEffect(() => {\n        if(user._id && localStorage.getItem('bingo_token')){\n            router.push('/joinGame');\n        }\n      }, [user])\n\n      const submitEmail = async () => {\n        if(!email){\n            alert(\n              'Must have a valid email!',\n            );\n            return;\n        }\n          const request = await fetch(`${FULL_URL}/users/forgotPassword`, {\n              method: 'POST',\n              headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({ \n                  email,\n              })\n            }) \n            const success = await request.json();\n            console.log({success})\n            if(success.error){\n                alert(\n                    `Yikes... ${success.error}`\n                  );\n                return; \n            }\n            if(!success){\n              alert(\n                'Something went wrong... please try again later',\n              );\n              return;\n            }\n            setConfirmationMessage(true);\n      }\n\n      if(confirmationMessage){\n        return (<div style={styles.container}>\n          <div style={MASTER.pageTitle}>PASSWORD RESET</div>\n          <div style={styles.message}>Your password reset email has been sent, check your inbox!</div>\n        </div>);\n      }\n\n    return (\n        <div style={styles.container}>\n            <div style={styles.subcontainer}>\n                <div style={MASTER.pageTitle}>PASSWORD RESET</div>\n                <div style={styles.message}>Submit your email address and we'll send you a password reset email.</div>\n                <input \n                    style={MASTER.wideRoundInput} \n                    value={email} \n                    onChange={e => setEmail(e.target.value)} \n                    placeholder={'Email'}\n                    type='email'\n                />\n                \n                <button \n                    style={{ ...MASTER.wideRoundBtn, marginTop: 20 }} \n                    onClick={() => submitEmail()}\n                >\n                    <span style={MASTER.wideRoundBtnText}>Submit</span>\n                </button>\n                \n            </div>\n        </div>\n    )\n  };\n\n  const styles = {\n      container: {\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'center',\n          alignItems: 'center',\n          width: '100%',\n          height: '100%',\n          paddingTop: 40,\n      },\n      subcontainer: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n        height: '100%',\n        maxWidth: 400,\n    },\n    message: {\n        textAlign: 'center',\n        marginTop: 10,\n    }\n  }\n  \n  export default ForgotPassword;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AAGA;AACA;AALA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AACA;AADA;AAAA;AAAA;AAQA;AACA;AACA;AACA;AAFA;AAIA;AACA;AADA;AANA;AACA;AARA;AAOA;AAPA;AAAA;AACA;AADA;AAiBA;AACA;AAAA;AAAA;AACA;AAnBA;AAAA;AAAA;AAAA;AACA;AAmBA;AApBA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AAyBA;AA1BA;AACA;AADA;AA+BA;AACA;AAhCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAiCA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AAFA;AAnBA;AAyBA;;;;A","sourceRoot":""}