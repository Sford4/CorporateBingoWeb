{"version":3,"file":"static/webpack/static/development/pages/login.js.b77687b7d8ca29ac40dc.hot-update.js","sources":["webpack:///./pages/login.js"],"sourcesContent":["import { useState, useEffect, useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport fetch from 'isomorphic-unfetch';\nimport FULL_URL from '../constants/constants';\n\n// context imports\nimport { UserContext } from '../contexts/userContext';\nimport { OrgContext } from '../contexts/orgContext';\n\n// Style imports\nimport { MASTER, COLORS } from '../styles/masterStyles';\n\nconst Login = () => {\n\n    const { user, storeUser } = useContext(UserContext);\n    const { contextOrg, getOrg } = useContext(OrgContext);\n\n    const router = useRouter()\n\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n\n    useEffect(() => {\n        if(user._id && localStorage.getItem('bingo_token')){\n            router.push('/joinGame');\n        }\n      }, [user])\n\n    const login = async () => {\n        if(!email || !password){\n            alert('Must have both email and password!')\n            return;\n        }\n        try {\n            const request = await fetch(`${FULL_URL}/users/login`, {\n                method: 'POST',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    email,\n                    password,\n                })\n              })\n              const user = await request.json();\n              if(!user.token){\n                  alert('Something went wrong... please try again later');\n                  return;\n              }\n              storeUser(user);\n              console.log({user})\n              if(user.role.org && !contextOrg._id){\n                  getOrg(user.role.org);\n              }\n              router.push('/joinGame');\n            } catch(err) {alert(err)}\n    }\n\n    const goToSignup = () => {\n        console.log('going to signup!')\n        router.push('/signup');\n    }\n\n\n    return (\n        <div style={styles.container}>\n            <div style={styles.subcontainer}>\n                <div style={MASTER.pageTitle}>LOGIN</div>\n                <input \n                    style={MASTER.wideRoundInput} \n                    value={email} \n                    onChange={e => setEmail(e.target.value)} \n                    placeholder={'Email'}\n                    type='email'\n                />\n                <input \n                    style={MASTER.wideRoundInput} \n                    value={password} \n                    onChange={e => setPassword(e.target.value)} \n                    placeholder={'Password'}\n                    type='password'\n                />\n                <button \n                    style={{ ...MASTER.wideRoundBtn, marginTop: 20 }} \n                    onClick={() => login()}\n                >\n                    <span style={MASTER.wideRoundBtnText}>Login</span>\n                </button>\n                <button \n                    style={{ ...MASTER.wideRoundBtn, marginTop: 20 }} \n                    onClick={() => goToSignup()}\n                >\n                    <span style={MASTER.wideRoundBtnText}>No account yet? Signup!</span>\n                </button>\n                <button \n                    style={{ ...MASTER.wideRoundBtn, marginTop: 20, backgroundColor: 'lightgray' }} \n                    onClick={() => goToSignup()}\n                >\n                    <span style={MASTER.wideRoundBtnText}>Forgot my password</span>\n                </button>\n            </div>\n        </div>\n    )\n  };\n\n  const styles = {\n      container: {\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'center',\n          alignItems: 'center',\n          width: '100%',\n          height: '100%',\n          paddingTop: 40,\n      },\n      subcontainer: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n        height: '100%',\n        maxWidth: 400,\n    }\n  }\n  \n  export default Login;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAIA;AACA;AANA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AACA;AADA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AANA;AACA;AAPA;AAMA;AANA;AAAA;AACA;AADA;AAiBA;AACA;AAlBA;AAAA;AAAA;AAAA;AACA;AAkBA;AAnBA;AACA;AADA;AAsBA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AA3BA;AAAA;AACA;AADA;AAAA;AAAA;AA4BA;AACA;AA7BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AA8BA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AAAA;AAAA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAVA;AAqBA;;;;A","sourceRoot":""}