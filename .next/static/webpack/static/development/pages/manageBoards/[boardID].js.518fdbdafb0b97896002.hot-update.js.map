{"version":3,"file":"static/webpack/static/development/pages/manageBoards/[boardID].js.518fdbdafb0b97896002.hot-update.js","sources":["webpack:///./components/ManageBoard/BoardBuilder/BoardBuilderBoard.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\n\n\n// Style imports\nimport { MASTER, COLORS } from '../../../styles/masterStyles';\n\n// Context imports\nimport { ManageBoardsContext } from '../../../contexts/manageBoardsContext';\n\n// Data imports\nimport { boardTemplates } from '../../../constants/boardSizes';\nimport { checkForRewards } from '../../../funcs/boardLogic';\n\n// Component imports\nimport SquareBuilder from './SquareBuilder';\nimport RewardBuilder from './RewardBuilder';\n\n// Material ui\nimport { withStyles } from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport MuiDialogActions from '@material-ui/core/DialogActions';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\n\nconst materialStyles = theme => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(2),\n    fontSize: 32,\n    color: COLORS.primary,\n  },\n  closeButton: {\n    position: 'absolute',\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500],\n  },\n});\n\nconst DialogTitle = withStyles(materialStyles)(props => {\n  const { children, classes, onClose } = props;\n  return (\n    <MuiDialogTitle disableTypography className={classes.root}>\n      <Typography variant=\"h6\">{children}</Typography>\n        <IconButton aria-label=\"close\" className={classes.closeButton} onClick={onClose}>\n          <CloseIcon />\n        </IconButton>\n    </MuiDialogTitle>\n  );\n});\n\nconst BoardBuilderBoard = (props) => {\n\n  const SQUARE_WIDTH = 60 / (Math.sqrt(props.board.numSquares) + 1);\n\n  let taskNum = 1;\n\n  const { contextBoard, updateBoard } = useContext(ManageBoardsContext);\n\n  const [board, setBoard] = useState(props.board);\n  const [rewardDialogOpen, setRewardDialogOpen] = useState(false);\n  const [reward, setReward] = useState({});\n  const [taskDialogOpen, setTaskDialogOpen] = useState(false);\n  const [task, setTask] = useState({});\n  \n  const openRewardBuilderPopup = (reward) => {\n    setRewardDialogOpen(true);\n    setReward(reward);\n  }\n\n  const openSquareBuilderPopup = (task) => {\n    setTaskDialogOpen(true);\n    setTask(task);\n  }\n\n  useEffect(() => {\n    setBoard(contextBoard)\n  }, [contextBoard])\n\n  const generateRow = row => {\n    return row.map((square, index) => {\n      switch (square.type) {\n        case 'reward':\n          const reward = board.rewards.length ?  board.rewards.filter(reward => reward.position === square.id)[0] : null;\n          if(!reward){\n            return <div key={`empty${index}`} \n                      style={{\n                        width: `${SQUARE_WIDTH}vw`,\n                        height: `${SQUARE_WIDTH}vw`,\n                        paddingTop: `${SQUARE_WIDTH * .72}%`,\n                        maxWidth: 110,\n                        maxHeight: 110,\n                      }} \n                    />;\n          }\n          return(\n              <button \n                key={`reward${index}`} \n                style={{\n                  width: `${SQUARE_WIDTH}vw`,\n                  height: `${SQUARE_WIDTH}vw`,\n                  // paddingTop: `${SQUARE_WIDTH * .72}%`,\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  backgroundColor: 'transparent',\n                  border: 'none',\n                  outline: 'none',\n                  cursor: 'pointer',\n                  maxWidth: 110,\n                  maxHeight: 110,\n                  position: 'relative',\n                }} \n                onClick={() => openRewardBuilderPopup(reward)}\n              >\n                <img \n                  style={{\n                    ...MASTER.smallRewardIcon,\n                    width: '70%',\n                    height: '70%',\n                  }} \n                  src={!reward.title && !reward.description && !reward.img ? '../../static/gift_light_gray.png' : '../../static/gift_gray.png'} \n                />\n              </button>\n          )\n        case 'task':\n          if(!taskNum){\n              return;\n          }\n          const task = board.squares[taskNum - 1];\n          if(taskNum === board.numSquares){\n            taskNum = 0;\n          }else {\n            taskNum++;\n          }\n          if(task.freeSquare){\n            return (\n              <button key={`free${index}`} \n                style={{ \n                  width: `${SQUARE_WIDTH}vw`,\n                  height: `${SQUARE_WIDTH}vw`,\n                  paddingTop: `${SQUARE_WIDTH * .72}%`,\n                  backgroundColor: `#${board.completeColor}`,\n                  borderWidth: 1,\n                  borderColor: 'black',\n                  display: 'flex',\n                  justifyContent: 'center',\n                  alignItems: 'center',\n                  outline: 'none',\n                  cursor: 'pointer',\n                  maxWidth: 110,\n                  maxHeight: 110,\n                  position: 'relative',\n                  \n                }}\n                onClick={() => openSquareBuilderPopup(task)}\n              >\n                <img style={MASTER.freeSquareIcon} src={'../../static/circle_check.png'} />\n              </button>\n            )\n          }\n          return (\n            <button \n              key={`task${index}`} \n              style={{\n                width: `${SQUARE_WIDTH}vw`,\n                height: `${SQUARE_WIDTH}vw`,\n                paddingTop: `${SQUARE_WIDTH * .72}%`,\n                backgroundColor: task.freeSquare ? `#${board.completeColor}` : `#${board.incompleteColor}`,\n                borderWidth: 1,\n                borderColor: 'black',\n                display: 'flex',\n                justifyContent: 'center',\n                alignItems: 'center',\n                outline: 'none',\n                cursor: 'pointer',\n                maxWidth: 110,\n                maxHeight: 110,\n                position: 'relative',\n              }}\n              onClick={() => openSquareBuilderPopup(task)}\n            >\n              <div style={MASTER.squareText}>{task.squareText}</div>\n            </button>\n          );\n        case 'empty':\n          return (\n            <div key={`empty${index}`} \n              style={{\n                width: `${SQUARE_WIDTH}vw`,\n                height: `${SQUARE_WIDTH}vw`,\n                paddingTop: `${SQUARE_WIDTH * .72}%`,\n                maxWidth: 110,\n                maxHeight: 110,\n                position: 'relative',\n              }} \n            />\n          );\n        default:\n          return (\n            <div key={`empty${index}`} \n              style={{\n                width: `${SQUARE_WIDTH}vw`,\n                height: `${SQUARE_WIDTH}vw`,\n                paddingTop: `${SQUARE_WIDTH * .72}%`,\n                maxWidth: 110,\n                maxHeight: 110,\n                position: 'relative',\n              }} \n            />\n          );\n      }\n    })\n  }\n\n  const generateBoard = () => {\n    const template = boardTemplates[props.size];\n    return template.spaces.map((row, index) => {\n      return (\n        <div \n          key={`row${index + 1}`} \n          style={{display: 'flex', flexDirection: 'row', width: '100%', justifyContent: 'center'}}\n        >\n          {generateRow(row)}\n        </div>\n      ) \n    });\n  }\n\n  if(board){\n    return (\n      <div style={styles.container}>\n        {generateBoard(props.board)}\n        <Dialog open={rewardDialogOpen} onBackdropClick={() => setRewardDialogOpen(false)}>\n          <DialogTitle onClose={() => setRewardDialogOpen(false)}>\n            EDIT REWARD\n          </DialogTitle>\n          <RewardBuilder reward={reward} openPopup={setRewardDialogOpen} />\n        </Dialog>\n        <Dialog open={taskDialogOpen} onBackdropClick={() => setTaskDialogOpen(false)}>\n           <DialogTitle onClose={() => setTaskDialogOpen(false)}>\n            EDIT TASK\n          </DialogTitle>\n          <SquareBuilder task={task} openPopup={setTaskDialogOpen} />\n        </Dialog>\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n  \nconst styles = {\n  container: {\n    flex: 1,\n    width: '100%',\n    backgroundColor: '#fff',\n  },\n};\n\nexport default BoardBuilderBoard;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAGA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AAJA;AAPA;AAAA;AACA;AAcA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AAEA;AAEA;AACA;AALA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAeA;AAAA;AAAA;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBA;AAEA;AACA;AAHA;AAKA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AASA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AAiBA;AAAA;AAAA;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AAgBA;AAAA;AAAA;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAvHA;AAmIA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AADA;AAQA;;;;A","sourceRoot":""}