{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nvar _jsxFileName = \"/Users/spencerford/Documents/DEVyall/PersonalProjects/CorporateBingoWeb/contexts/playContext.js\";\nvar __jsx = React.createElement;\nimport React, { createContext, useState, useEffect } from 'react';\nimport fetch from 'isomorphic-unfetch';\nimport FULL_URL from '../constants/constants';\nexport const PlayContext = createContext();\n\nconst PlayContextProvider = props => {\n  const {\n    0: contextGame,\n    1: setContextGame\n  } = useState({});\n\n  const getGame = async (gameID, userID) => {\n    if (gameID && contextGame.id === gameID) {\n      console.log('go with same game', contextGame, gameID);\n      return;\n    }\n\n    console.log({\n      gameID\n    });\n\n    if (gameID && userID) {\n      try {\n        const request = await fetch(`${FULL_URL}/games/${gameID}/${userID}`, {\n          method: 'POST' // headers: {\n          //     'Accept': 'application/json',\n          //     'Content-Type': 'application/json',\n          //     'Authorization': `Bearer ${localStorage.getItem('bingo_token')}`\n          // },\n\n        });\n        const game = await request.json();\n        console.log({\n          game\n        });\n        setContextGame(game);\n      } catch (err) {\n        alert(err);\n      }\n    }\n  };\n\n  const saveGame = async game => {\n    setContextGame(game);\n    console.log('SAVING GAME');\n\n    try {\n      const request = await fetch(`${FULL_URL}/games/update/${contextGame.id}`, {\n        method: 'POST',\n        // headers: {\n        //   'Accept': 'application/json',\n        //   'Content-Type': 'application/json',\n        //   'Authorization': `Bearer ${localStorage.getItem('bingo_token')}`\n        // },\n        body: _JSON$stringify(_objectSpread({}, game))\n      });\n      const success = await request.json();\n      console.log({\n        success\n      });\n\n      if (success) {\n        setContextGame(success);\n      } else {\n        alert('There was a problem saving your board... please try again later!');\n      }\n    } catch (err) {\n      alert(err);\n    }\n  };\n\n  return __jsx(PlayContext.Provider, {\n    value: {\n      contextGame,\n      updateGame: setContextGame,\n      getGame,\n      saveGame\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, props.children);\n};\n\nexport default PlayContextProvider;","map":{"version":3,"sources":["/Users/spencerford/Documents/DEVyall/PersonalProjects/CorporateBingoWeb/contexts/playContext.js"],"names":["React","createContext","useState","useEffect","fetch","FULL_URL","PlayContext","PlayContextProvider","props","contextGame","setContextGame","getGame","gameID","userID","id","console","log","request","method","game","json","err","alert","saveGame","body","success","updateGame","children"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,QAA/B,EAAyCC,SAAzC,QAA0D,OAA1D;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,QAAP,MAAqB,wBAArB;AAEA,OAAO,MAAMC,WAAW,GAAGL,aAAa,EAAjC;;AAEP,MAAMM,mBAAmB,GAAIC,KAAD,IAAW;AAEnC,QAAM;AAAA,OAAEC,WAAF;AAAA,OAAeC;AAAf,MAAkCR,QAAQ,CAAC,EAAD,CAAhD;;AAEA,QAAMS,OAAO,GAAG,OAAOC,MAAP,EAAeC,MAAf,KAA0B;AACtC,QAAGD,MAAM,IAAIH,WAAW,CAACK,EAAZ,KAAmBF,MAAhC,EAAuC;AACnCG,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCP,WAAjC,EAA8CG,MAA9C;AACA;AACH;;AACDG,IAAAA,OAAO,CAACC,GAAR,CAAY;AAACJ,MAAAA;AAAD,KAAZ;;AACA,QAAGA,MAAM,IAAIC,MAAb,EAAoB;AAChB,UAAI;AACA,cAAMI,OAAO,GAAG,MAAMb,KAAK,CAAE,GAAEC,QAAS,UAASO,MAAO,IAAGC,MAAO,EAAvC,EAA0C;AACjEK,UAAAA,MAAM,EAAE,MADyD,CAEjE;AACA;AACA;AACA;AACA;;AANiE,SAA1C,CAA3B;AAQI,cAAMC,IAAI,GAAG,MAAMF,OAAO,CAACG,IAAR,EAAnB;AACAL,QAAAA,OAAO,CAACC,GAAR,CAAY;AAACG,UAAAA;AAAD,SAAZ;AACAT,QAAAA,cAAc,CAACS,IAAD,CAAd;AACP,OAZD,CAYE,OAAME,GAAN,EAAW;AAACC,QAAAA,KAAK,CAACD,GAAD,CAAL;AAAW;AAC5B;AACJ,GArBD;;AAuBA,QAAME,QAAQ,GAAG,MAAOJ,IAAP,IAAgB;AAC7BT,IAAAA,cAAc,CAACS,IAAD,CAAd;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;;AACA,QAAI;AACA,YAAMC,OAAO,GAAG,MAAMb,KAAK,CAAE,GAAEC,QAAS,iBAAgBI,WAAW,CAACK,EAAG,EAA5C,EAA+C;AACtEI,QAAAA,MAAM,EAAE,MAD8D;AAEtE;AACA;AACA;AACA;AACA;AACAM,QAAAA,IAAI,EAAE,kCACCL,IADD;AAPgE,OAA/C,CAA3B;AAWE,YAAMM,OAAO,GAAG,MAAMR,OAAO,CAACG,IAAR,EAAtB;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAY;AAACS,QAAAA;AAAD,OAAZ;;AACA,UAAGA,OAAH,EAAW;AACTf,QAAAA,cAAc,CAACe,OAAD,CAAd;AACD,OAFD,MAEO;AACHH,QAAAA,KAAK,CAAC,kEAAD,CAAL;AACH;AAEN,KApBD,CAoBE,OAAMD,GAAN,EAAW;AAACC,MAAAA,KAAK,CAACD,GAAD,CAAL;AAAW;AAE5B,GAzBD;;AA4BA,SACI,MAAC,WAAD,CAAa,QAAb;AACI,IAAA,KAAK,EAAE;AACHZ,MAAAA,WADG;AAEHiB,MAAAA,UAAU,EAAEhB,cAFT;AAGHC,MAAAA,OAHG;AAIHY,MAAAA;AAJG,KADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOKf,KAAK,CAACmB,QAPX,CADJ;AAWH,CAlED;;AAoEA,eAAepB,mBAAf","sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\nimport fetch from 'isomorphic-unfetch';\nimport FULL_URL from '../constants/constants';\n\nexport const PlayContext = createContext();\n\nconst PlayContextProvider = (props) => {\n\n    const [ contextGame, setContextGame ] = useState({});\n\n    const getGame = async (gameID, userID) => {\n        if(gameID && contextGame.id === gameID){\n            console.log('go with same game', contextGame, gameID)\n            return;\n        }\n        console.log({gameID})\n        if(gameID && userID){\n            try {\n                const request = await fetch(`${FULL_URL}/games/${gameID}/${userID}`, {\n                    method: 'POST',\n                    // headers: {\n                    //     'Accept': 'application/json',\n                    //     'Content-Type': 'application/json',\n                    //     'Authorization': `Bearer ${localStorage.getItem('bingo_token')}`\n                    // },\n                    })\n                    const game = await request.json();\n                    console.log({game})\n                    setContextGame(game);\n            } catch(err) {alert(err)}\n        }\n    }\n\n    const saveGame = async (game) => {\n        setContextGame(game);\n        console.log('SAVING GAME');\n        try {\n            const request = await fetch(`${FULL_URL}/games/update/${contextGame.id}`, {\n                method: 'POST',\n                // headers: {\n                //   'Accept': 'application/json',\n                //   'Content-Type': 'application/json',\n                //   'Authorization': `Bearer ${localStorage.getItem('bingo_token')}`\n                // },\n                body: JSON.stringify({\n                    ...game\n                })\n              })\n              const success = await request.json();\n              console.log({success})\n              if(success){\n                setContextGame(success);\n              } else {\n                  alert('There was a problem saving your board... please try again later!')\n              }\n\n        } catch(err) {alert(err)}\n        \n    }\n\n\n    return (\n        <PlayContext.Provider \n            value={{ \n                contextGame, \n                updateGame: setContextGame, \n                getGame, \n                saveGame\n            }}>\n            {props.children}\n        </PlayContext.Provider>\n    )\n}\n\nexport default PlayContextProvider;"]},"metadata":{},"sourceType":"module"}