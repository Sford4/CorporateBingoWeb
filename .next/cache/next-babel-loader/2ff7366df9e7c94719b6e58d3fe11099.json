{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nvar _jsxFileName = \"/Users/spencerford/Documents/DEVyall/PersonalProjects/CorporateBingoWeb/pages/register.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport fetch from 'isomorphic-unfetch';\nimport FULL_URL from '../constants/constants'; // context imports\n\nimport { UserContext } from '../contexts/userContext'; // Style imports\n\nimport { MASTER, COLORS } from '../styles/masterStyles';\n\nconst Register = () => {\n  const {\n    user,\n    storeUser\n  } = useContext(UserContext);\n  const router = useRouter();\n  const {\n    0: orgName,\n    1: setOrgName\n  } = useState('');\n  const {\n    0: userName,\n    1: setUserName\n  } = useState('');\n  const {\n    0: email,\n    1: setEmail\n  } = useState('');\n  const {\n    0: password,\n    1: setPassword\n  } = useState('');\n  const {\n    0: confirmPassword,\n    1: setConfirmPassword\n  } = useState('');\n  useEffect(() => {\n    if (user.id && localStorage.getItem('bingo_token')) {\n      router.push('/joinGame');\n    }\n  }, [user]);\n\n  const openWarning = message => {\n    alert(`Woah there! ${message}`);\n  };\n\n  const validEmail = email => {\n    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n  };\n\n  const register = async () => {\n    if (!userName) {\n      openWarning('Must have a username!');\n      return;\n    }\n\n    if (!email || !validEmail(email)) {\n      openWarning('Must have a valid email!');\n      return;\n    }\n\n    if (!password || password !== confirmPassword) {\n      openWarning('Passwords must match!');\n      return;\n    }\n\n    try {\n      const request = await fetch(`${FULL_URL}/orgs/register`, {\n        method: 'POST',\n        // headers: {\n        //   'Accept': 'application/json',\n        //   'Content-Type': 'application/json'\n        // },\n        body: _JSON$stringify({\n          orgName,\n          userName,\n          email,\n          password\n        })\n      });\n      const user = await request.json();\n      storeUser(user);\n    } catch (err) {\n      alert(err);\n    }\n  };\n\n  return __jsx(\"div\", {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: styles.subcontainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: MASTER.pageTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"REGISTER\"), __jsx(\"div\", {\n    style: _objectSpread({}, MASTER.pageTitle, {\n      fontSize: 24,\n      margin: '10px 0 -20px 0'\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"ORG NAME\"), __jsx(\"input\", {\n    style: MASTER.wideRoundInput,\n    value: orgName,\n    onChange: e => setOrgName(e.target.value),\n    placeholder: 'Org Name',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    style: _objectSpread({}, MASTER.pageTitle, {\n      marginTop: 20\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \"ORG PAYMENT DEETS\"), __jsx(\"div\", {\n    style: _objectSpread({}, MASTER.pageTitle, {\n      fontSize: 24,\n      margin: '10px 0 -20px 0'\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"USER DETAILS\"), __jsx(\"input\", {\n    style: MASTER.wideRoundInput,\n    value: userName,\n    onChange: e => setUserName(e.target.value),\n    placeholder: 'User Name',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }), __jsx(\"input\", {\n    style: MASTER.wideRoundInput,\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    placeholder: 'Email',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }), __jsx(\"input\", {\n    style: MASTER.wideRoundInput,\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    type: \"password\",\n    placeholder: 'Password',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }), __jsx(\"input\", {\n    style: MASTER.wideRoundInput,\n    value: confirmPassword,\n    onChange: e => setConfirmPassword(e.target.value),\n    type: \"password\",\n    placeholder: 'Confirm Password (passwords must match!)',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    style: _objectSpread({}, MASTER.wideRoundBtn, {\n      marginTop: 20\n    }),\n    onClick: () => register(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    style: MASTER.wideRoundBtnText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, \"Register\"))));\n};\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n    height: '100%',\n    paddingTop: 40\n  },\n  subcontainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n    height: '100%',\n    maxWidth: 400\n  }\n};\nexport default Register;","map":{"version":3,"sources":["/Users/spencerford/Documents/DEVyall/PersonalProjects/CorporateBingoWeb/pages/register.js"],"names":["useState","useEffect","useContext","useRouter","fetch","FULL_URL","UserContext","MASTER","COLORS","Register","user","storeUser","router","orgName","setOrgName","userName","setUserName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","id","localStorage","getItem","push","openWarning","message","alert","validEmail","re","test","String","toLowerCase","register","request","method","body","json","err","styles","container","subcontainer","pageTitle","fontSize","margin","wideRoundInput","e","target","value","marginTop","wideRoundBtn","wideRoundBtnText","display","flexDirection","justifyContent","alignItems","width","height","paddingTop","maxWidth"],"mappings":"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","sourcesContent":["\n\nimport { useState, useEffect, useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport fetch from 'isomorphic-unfetch';\nimport FULL_URL from '../constants/constants';\n\n// context imports\nimport { UserContext } from '../contexts/userContext';\n\n// Style imports\nimport { MASTER, COLORS } from '../styles/masterStyles';\n\nconst Register = () => {\n\n    const { user, storeUser } = useContext(UserContext);\n\n    const router = useRouter()\n    \n    const [orgName, setOrgName] = useState('');\n    const [userName, setUserName] = useState('');\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [confirmPassword, setConfirmPassword] = useState('');\n\n    useEffect(() => {\n        if(user.id && localStorage.getItem('bingo_token')){\n            router.push('/joinGame');\n        }\n      }, [user])\n\n    const openWarning = (message) => {\n            alert(\n                `Woah there! ${message}`,\n            );\n    }\n\n    const validEmail = email => {\n        var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return re.test(String(email).toLowerCase());\n    }\n    \n    const register = async () => {\n        if(!userName){\n            openWarning('Must have a username!');\n            return;\n        }\n        if(!email || !validEmail(email)){\n            openWarning('Must have a valid email!');\n            return;\n        }\n        if(!password || password !== confirmPassword){\n            openWarning('Passwords must match!');\n            return;\n        }\n        try {\n            const request = await fetch(`${FULL_URL}/orgs/register`, {\n                method: 'POST',\n                // headers: {\n                //   'Accept': 'application/json',\n                //   'Content-Type': 'application/json'\n                // },\n                body: JSON.stringify({\n                    orgName,\n                    userName,\n                    email,\n                    password,\n                })\n              })\n              const user = await request.json();\n              storeUser(user);\n        } catch (err) { alert( err ) }\n        \n        \n    }\n\n    return (\n\n        <div style={styles.container}>\n            <div style={styles.subcontainer}>\n                <div style={MASTER.pageTitle}>REGISTER</div>\n                <div style={{ ...MASTER.pageTitle, fontSize: 24, margin: '10px 0 -20px 0' }}>ORG NAME</div>\n                <input \n                    style={MASTER.wideRoundInput} \n                    value={orgName} \n                    onChange={e => setOrgName(e.target.value)} \n                    placeholder={'Org Name'}\n                />\n                <div style={{ ...MASTER.pageTitle, marginTop: 20 }}>ORG PAYMENT DEETS</div>\n                <div style={{ ...MASTER.pageTitle, fontSize: 24, margin: '10px 0 -20px 0' }}>USER DETAILS</div>\n                <input \n                    style={MASTER.wideRoundInput} \n                    value={userName} \n                    onChange={e => setUserName(e.target.value)} \n                    placeholder={'User Name'}\n                />\n                <input \n                    style={MASTER.wideRoundInput} \n                    value={email} \n                    onChange={e => setEmail(e.target.value)} \n                    placeholder={'Email'}\n                />\n                <input \n                    style={MASTER.wideRoundInput} \n                    value={password} \n                    onChange={e => setPassword(e.target.value)} \n                    type='password'\n                    placeholder={'Password'}\n                />\n                <input \n                    style={MASTER.wideRoundInput} \n                    value={confirmPassword} \n                    onChange={e => setConfirmPassword(e.target.value)} \n                    type='password'\n                    placeholder={'Confirm Password (passwords must match!)'}\n                />\n                <button \n                    style={{ ...MASTER.wideRoundBtn, marginTop: 20 }} \n                    onClick={() => register()}\n                >\n                    <span style={MASTER.wideRoundBtnText}>Register</span>\n                </button>\n            </div>\n        </div>\n    )\n  };\n\n  const styles = {\n    container: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n        height: '100%',\n        paddingTop: 40,\n    },\n    subcontainer: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n        height: '100%',\n        maxWidth: 400,\n    }\n}\n  \n  export default Register;"]},"metadata":{},"sourceType":"module"}