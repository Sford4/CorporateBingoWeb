{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/spencerford/Documents/DEVyall/PersonalProjects/CorporateBingoWeb/components/ManageBoard/BoardBuilder/RewardBuilder.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useCallback, useContext } from 'react'; // Style imports\n\nimport { MASTER, COLORS } from '../../../styles/masterStyles'; // Context imports\n\nimport { ManageBoardsContext } from '../../../contexts/manageBoardsContext'; // Component imports\n\nimport { useDropzone } from 'react-dropzone';\n\nvar RewardBuilder = function RewardBuilder(props) {\n  var _useContext = useContext(ManageBoardsContext),\n      contextBoard = _useContext.contextBoard,\n      updateBoard = _useContext.updateBoard,\n      setStuffToSave = _useContext.setStuffToSave;\n\n  var _useState = useState({}),\n      reward = _useState[0],\n      setReward = _useState[1];\n\n  var generateHowToEarn = function generateHowToEarn(position) {\n    if (position === 'wholeBoard') {\n      return 'Complete every task on the board!';\n    } else if (position.substring(0, 3) === 'row') {\n      return \"Complete every task in row \".concat(position.slice(-1), \".\");\n    } else if (position.substring(0, 3) === 'col') {\n      return \"Complete every task in column \".concat(position.slice(-1), \".\");\n    } else if (position === 'diagonalUpRight') {\n      return 'Complete every task in the diagonal from the bottom left square to the top right.';\n    }\n\n    return 'Complete every task in the diagonal from the top left square to the bottom right.';\n  };\n\n  useEffect(function () {\n    if (!contextBoard._id) {\n      setReward(props.reward);\n    } else {\n      setReward(contextBoard.rewards.filter(function (reward) {\n        return reward._id === props.reward._id;\n      })[0]);\n    }\n\n    if (reward._id && !reward.howToEarn) {\n      updateReward('howToEarn', generateHowToEarn(reward.position));\n    }\n  }, [contextBoard]);\n  var onDrop = useCallback(function (acceptedFiles) {\n    var reader = new FileReader();\n\n    reader.onabort = function () {\n      return alert('file reading was aborted');\n    };\n\n    reader.onerror = function () {\n      return alert('file reading has failed');\n    };\n\n    var file = acceptedFiles[0]; // if(!supportedFileTypes.includes(file.type)){\n    //     this.openSnackBar(<FormattedMessage {...UserMessages.wrongFileType} />);\n    // } else if (file.size > 10000000){\n    //     this.openSnackBar(<FormattedMessage {...UserMessages.picTooBig} />);\n    // } else {\n\n    reader.addEventListener('load', function () {\n      return setImg(reader.result);\n    });\n    reader.readAsDataURL(file); // }\n  }, []);\n\n  var _useDropzone = useDropzone({\n    onDrop: onDrop\n  }),\n      getRootProps = _useDropzone.getRootProps,\n      getInputProps = _useDropzone.getInputProps,\n      isDragActive = _useDropzone.isDragActive;\n\n  var updateReward = function updateReward(field, val) {\n    var board = contextBoard;\n    updateBoard(_objectSpread({}, board, {\n      rewards: board.rewards.map(function (oldReward) {\n        if (oldReward._id === reward._id) {\n          return _objectSpread({}, oldReward, _defineProperty({}, field, val));\n        }\n\n        return oldReward;\n      })\n    }));\n    setStuffToSave(true);\n  };\n\n  var remove = function remove(id) {\n    var board = contextBoard;\n    updateBoard(_objectSpread({}, board, {\n      rewards: board.rewards.map(function (oldReward) {\n        if (oldReward._id === id) {\n          return _objectSpread({}, oldReward, {\n            img: '',\n            title: '',\n            howToEarn: '',\n            description: ''\n          });\n        }\n\n        return oldReward;\n      })\n    }));\n  };\n\n  var done = function done() {\n    props.openPopup(false);\n  };\n\n  if (!reward._id) {\n    return __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"LOADING\");\n  }\n\n  return __jsx(\"div\", {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: {\n      height: 200,\n      width: '100%',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      marginTop: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, __jsx(\"div\", _extends({}, getRootProps(), {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }), __jsx(\"input\", _extends({}, getInputProps(), {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  })), reward.img.length ? __jsx(\"div\", {\n    style: {\n      width: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    style: styles.pic,\n    src: reward.img,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }), __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, \"(Click image to change)\")) : __jsx(\"div\", {\n    style: styles.dropzone,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, __jsx(\"p\", {\n    style: {\n      textAlign: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, \"Click or drag here to change image\"), __jsx(\"p\", {\n    style: {\n      textAlign: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, \"Put something that'll get the players excited!\")))), __jsx(\"span\", {\n    style: styles.inputLabel,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, \"Title\"), __jsx(\"input\", {\n    style: _objectSpread({}, MASTER.wideRoundInput, {\n      marginTop: 2\n    }),\n    value: reward.title,\n    onChange: function onChange(e) {\n      return updateReward('title', e.target.value);\n    },\n    placeholder: 'e.g. $10 gift card!',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }), __jsx(\"span\", {\n    style: styles.inputLabel,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, \"Description\"), __jsx(\"textarea\", {\n    autoFocus: true,\n    style: MASTER.wideRoundTextArea,\n    onChange: function onChange(e) {\n      return updateReward('description', e.target.value);\n    },\n    value: reward.description,\n    placeholder: 'e.g. A gift card to any store you want!',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }), __jsx(\"span\", {\n    style: styles.inputLabel,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, \"How to earn\"), __jsx(\"textarea\", {\n    autoFocus: true,\n    style: MASTER.wideRoundTextArea,\n    onChange: function onChange(e) {\n      return updateReward('howToEarn', e.target.value);\n    },\n    value: reward.howToEarn,\n    placeholder: 'e.g. Complete all the speed goals',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    style: _objectSpread({}, MASTER.wideRoundBtn, {\n      backgroundColor: 'red',\n      marginTop: 20\n    }),\n    onClick: function onClick() {\n      return remove(reward._id);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    style: MASTER.wideRoundBtnText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, \"Remove Reward\")), __jsx(\"button\", {\n    style: _objectSpread({}, MASTER.wideRoundBtn, {\n      marginTop: 20\n    }),\n    onClick: function onClick() {\n      return done();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    style: MASTER.wideRoundBtnText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, \"Done\")));\n};\n\nvar styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#fff',\n    padding: 30,\n    minWidth: 250,\n    width: '30vw'\n  },\n  pic: {\n    width: 200,\n    height: 200,\n    cursor: 'pointer'\n  },\n  inputLabel: {\n    marginTop: 15,\n    color: COLORS.primary,\n    fontSize: 17\n  },\n  dropzone: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: 200,\n    height: 200,\n    border: '2px dotted black',\n    marginRight: 10,\n    cursor: 'pointer',\n    outline: 'none'\n  }\n};\nexport default RewardBuilder;","map":{"version":3,"sources":["/Users/spencerford/Documents/DEVyall/PersonalProjects/CorporateBingoWeb/components/ManageBoard/BoardBuilder/RewardBuilder.js"],"names":["React","useState","useEffect","useCallback","useContext","MASTER","COLORS","ManageBoardsContext","useDropzone","RewardBuilder","props","contextBoard","updateBoard","setStuffToSave","reward","setReward","generateHowToEarn","position","substring","slice","_id","rewards","filter","howToEarn","updateReward","onDrop","acceptedFiles","reader","FileReader","onabort","alert","onerror","file","addEventListener","setImg","result","readAsDataURL","getRootProps","getInputProps","isDragActive","field","val","board","map","oldReward","remove","id","img","title","description","done","openPopup","styles","container","height","width","display","justifyContent","alignItems","marginTop","length","flexDirection","pic","dropzone","textAlign","inputLabel","wideRoundInput","e","target","value","wideRoundTextArea","wideRoundBtn","backgroundColor","wideRoundBtnText","padding","minWidth","cursor","color","primary","fontSize","border","marginRight","outline"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback, useContext } from 'react';\n\n\n// Style imports\nimport { MASTER, COLORS } from '../../../styles/masterStyles';\n\n// Context imports\nimport { ManageBoardsContext } from '../../../contexts/manageBoardsContext';\n\n// Component imports\nimport {useDropzone} from 'react-dropzone'\n\nconst RewardBuilder = (props) => {\n\n  const { contextBoard, updateBoard, setStuffToSave } = useContext(ManageBoardsContext);\n\n  const [reward, setReward] = useState({});\n\n  const generateHowToEarn = position => {\n    if(position === 'wholeBoard'){\n      return 'Complete every task on the board!';\n    } else if (position.substring(0, 3) === 'row'){\n      return `Complete every task in row ${position.slice(-1)}.`; \n    } else if (position.substring(0, 3) === 'col'){\n      return `Complete every task in column ${position.slice(-1)}.`;\n    } else if (position === 'diagonalUpRight'){\n      return 'Complete every task in the diagonal from the bottom left square to the top right.'\n    }\n    return 'Complete every task in the diagonal from the top left square to the bottom right.'\n  }\n\n  useEffect(() => {\n    if(!contextBoard._id){\n        setReward(props.reward);\n    } else {\n        setReward(contextBoard.rewards.filter(reward => reward._id === props.reward._id)[0]);\n    }\n    if(reward._id && !reward.howToEarn){\n        updateReward('howToEarn', generateHowToEarn(reward.position));\n    }\n  }, [contextBoard])\n\n  \n\n  const onDrop = useCallback(acceptedFiles => {\n    const reader = new FileReader();\n    reader.onabort = () => alert('file reading was aborted')\n    reader.onerror = () => alert('file reading has failed')\n    const file = acceptedFiles[0];\n    // if(!supportedFileTypes.includes(file.type)){\n    //     this.openSnackBar(<FormattedMessage {...UserMessages.wrongFileType} />);\n    // } else if (file.size > 10000000){\n    //     this.openSnackBar(<FormattedMessage {...UserMessages.picTooBig} />);\n    // } else {\n        reader.addEventListener('load', () =>\n            setImg(reader.result)\n        );\n        reader.readAsDataURL(file);\n    // }\n    }, []);\n    const {getRootProps, getInputProps, isDragActive} = useDropzone({onDrop})\n\n    const updateReward = (field, val) => {\n        const board = contextBoard;\n        updateBoard({\n            ...board,\n            rewards: board.rewards.map(oldReward => {\n                if(oldReward._id === reward._id){\n                    return {\n                        ...oldReward,\n                        [field]: val\n                    }\n                }\n                return oldReward;\n            })\n        });\n        setStuffToSave(true);\n    }\n\n    const remove = (id) => {\n        const board = contextBoard;\n        updateBoard({\n            ...board,\n            rewards: board.rewards.map(oldReward => {\n                if(oldReward._id === id){\n                    return {\n                        ...oldReward,\n                        img: '',\n                        title: '',\n                        howToEarn: '',\n                        description: '',\n                    }\n                }\n                return oldReward;\n            })\n        });\n    }\n\n  const done = () => {\n    props.openPopup(false);\n  }\n\n  if(!reward._id){\n    return <div>LOADING</div>\n  }\n\n  return (\n    <div style={styles.container}>\n      <div style={{ height: 200, width: '100%', display: 'flex', justifyContent: 'center', alignItems: 'center', marginTop: 10 }}>\n        \n      <div {...getRootProps()}>\n        <input {...getInputProps()} />\n        {reward.img.length ? \n            <div style={{ width: '100%', display: 'flex', flexDirection: 'column', alignItems: 'center'}}>\n                <img \n                    style={styles.pic} \n                    src={reward.img} \n                /> \n                <span>(Click image to change)</span>\n            </div>: \n            <div style={styles.dropzone}>\n                <p style={{textAlign: 'center'}}>Click or drag here to change image</p>\n                <p style={{textAlign: 'center'}}>Put something that'll get the players excited!</p>\n            </div>\n        }\n      </div>\n      </div>\n      <span style={styles.inputLabel}>Title</span>\n      <input \n            style={{ ...MASTER.wideRoundInput, marginTop: 2 }} \n            value={reward.title} \n            onChange={e => updateReward('title', e.target.value)} \n            placeholder={'e.g. $10 gift card!'}\n        />\n        <span style={styles.inputLabel}>Description</span>\n        <textarea\n            autoFocus\n            style={MASTER.wideRoundTextArea}\n            onChange={(e) => updateReward('description', e.target.value)}\n            value={reward.description} \n            placeholder={'e.g. A gift card to any store you want!'}\n        />\n        <span style={styles.inputLabel}>How to earn</span>\n        <textarea\n            autoFocus\n            style={MASTER.wideRoundTextArea}\n            onChange={(e) => updateReward('howToEarn', e.target.value)}\n            value={reward.howToEarn} \n            placeholder={'e.g. Complete all the speed goals'}\n            \n        />\n        <button \n            style={{ ...MASTER.wideRoundBtn, backgroundColor: 'red', marginTop: 20 }} \n            onClick={() => remove(reward._id)}\n        >\n            <span style={MASTER.wideRoundBtnText}>Remove Reward</span>\n        </button>\n        <button \n            style={{ ...MASTER.wideRoundBtn, marginTop: 20 }} \n            onClick={() => done()}\n        >\n            <span style={MASTER.wideRoundBtnText}>Done</span>\n        </button>\n    </div>\n  );\n}\n  \nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#fff',\n    padding: 30,\n    minWidth: 250,\n    width: '30vw',\n  },\n  pic: {\n    width: 200,\n    height: 200,\n    cursor: 'pointer',\n  },\n  inputLabel: {\n    marginTop: 15,\n    color: COLORS.primary,\n    fontSize: 17,\n    },\n    dropzone: {\n        display: 'flex', \n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: 200,\n        height: 200,\n        border: '2px dotted black',\n        marginRight: 10,\n        cursor: 'pointer',\n        outline: 'none',\n    }\n\n};\n\nexport default RewardBuilder;"]},"metadata":{},"sourceType":"module"}