{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nvar _jsxFileName = \"/Users/spencerford/Documents/DEVyall/PersonalProjects/CorporateBingoWeb/pages/login.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, useContext } from 'react';\nimport { useRouter } from 'next/router'; // context imports\n\nimport { UserContext } from '../contexts/userContext';\nimport { OrgContext } from '../contexts/orgContext'; // Style imports\n\nimport { MASTER, COLORS } from '../styles/masterStyles';\n\nconst Login = () => {\n  const {\n    user,\n    storeUser\n  } = useContext(UserContext);\n  const {\n    contextOrg,\n    getOrg\n  } = useContext(OrgContext);\n  const router = useRouter();\n  const {\n    0: email,\n    1: setEmail\n  } = useState('');\n  const {\n    0: password,\n    1: setPassword\n  } = useState('');\n  useEffect(() => {\n    if (user._id && localStorage.getItem('bingo_token')) {\n      router.push('/joinGame');\n    }\n  }, [user]);\n\n  const login = async () => {\n    if (!email || !password) {\n      alert('Must have both email and password!');\n      return;\n    }\n\n    try {\n      const request = await fetch('http://localhost:8000/users/login', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: _JSON$stringify({\n          email,\n          password\n        })\n      });\n      const user = await request.json();\n\n      if (!user.token) {\n        alert('Something went wrong... please try again later');\n        return;\n      }\n\n      storeUser(user);\n      console.log({\n        user\n      });\n\n      if (user.role.org && !contextOrg._id) {\n        getOrg(user.role.org);\n      }\n\n      router.push('/joinGame');\n    } catch (err) {\n      alert(err);\n    }\n  };\n\n  const goToSignup = () => {\n    router.push('/signup');\n  };\n\n  return __jsx(\"div\", {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: styles.subcontainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: MASTER.pageTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"LOGIN\"), __jsx(\"input\", {\n    style: MASTER.wideRoundInput,\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    placeholder: 'Email',\n    type: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }), __jsx(\"input\", {\n    style: MASTER.wideRoundInput,\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    placeholder: 'Password',\n    type: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    style: _objectSpread({}, MASTER.wideRoundBtn, {\n      marginTop: 20\n    }),\n    onClick: () => login(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    style: MASTER.wideRoundBtnText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"Login\")), __jsx(\"button\", {\n    style: _objectSpread({}, MASTER.wideRoundBtn, {\n      marginTop: 20\n    }),\n    onClick: () => goToSignup(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    style: MASTER.wideRoundBtnText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"No account yet? Signup!\"))));\n};\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n    height: '100%',\n    paddingTop: 40\n  },\n  subcontainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n    height: '100%',\n    maxWidth: 400\n  }\n};\nexport default Login;","map":{"version":3,"sources":["/Users/spencerford/Documents/DEVyall/PersonalProjects/CorporateBingoWeb/pages/login.js"],"names":["useState","useEffect","useContext","useRouter","UserContext","OrgContext","MASTER","COLORS","Login","user","storeUser","contextOrg","getOrg","router","email","setEmail","password","setPassword","_id","localStorage","getItem","push","login","alert","request","fetch","method","headers","body","json","token","console","log","role","org","err","goToSignup","styles","container","subcontainer","pageTitle","wideRoundInput","e","target","value","wideRoundBtn","marginTop","wideRoundBtnText","display","flexDirection","justifyContent","alignItems","width","height","paddingTop","maxWidth"],"mappings":"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","sourcesContent":["import { useState, useEffect, useContext } from 'react';\nimport { useRouter } from 'next/router'\n\n// context imports\nimport { UserContext } from '../contexts/userContext';\nimport { OrgContext } from '../contexts/orgContext';\n\n// Style imports\nimport { MASTER, COLORS } from '../styles/masterStyles';\n\nconst Login = () => {\n\n    const { user, storeUser } = useContext(UserContext);\n    const { contextOrg, getOrg } = useContext(OrgContext);\n\n    const router = useRouter()\n\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n\n    useEffect(() => {\n        if(user._id && localStorage.getItem('bingo_token')){\n            router.push('/joinGame');\n        }\n      }, [user])\n\n    const login = async () => {\n        if(!email || !password){\n            alert('Must have both email and password!')\n            return;\n        }\n        try {\n            const request = await fetch('http://localhost:8000/users/login', {\n                method: 'POST',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    email,\n                    password,\n                })\n              })\n              const user = await request.json();\n              if(!user.token){\n                  alert('Something went wrong... please try again later');\n                  return;\n              }\n              storeUser(user);\n              console.log({user})\n              if(user.role.org && !contextOrg._id){\n                  getOrg(user.role.org);\n              }\n              router.push('/joinGame');\n            } catch(err) {alert(err)}\n    }\n\n    const goToSignup = () => {\n        router.push('/signup');\n    }\n\n\n    return (\n        <div style={styles.container}>\n            <div style={styles.subcontainer}>\n                <div style={MASTER.pageTitle}>LOGIN</div>\n                <input \n                    style={MASTER.wideRoundInput} \n                    value={email} \n                    onChange={e => setEmail(e.target.value)} \n                    placeholder={'Email'}\n                    type='email'\n                />\n                <input \n                    style={MASTER.wideRoundInput} \n                    value={password} \n                    onChange={e => setPassword(e.target.value)} \n                    placeholder={'Password'}\n                    type='password'\n                />\n                <button \n                    style={{ ...MASTER.wideRoundBtn, marginTop: 20 }} \n                    onClick={() => login()}\n                >\n                    <span style={MASTER.wideRoundBtnText}>Login</span>\n                </button>\n                <button \n                    style={{ ...MASTER.wideRoundBtn, marginTop: 20 }} \n                    onClick={() => goToSignup()}\n                >\n                    <span style={MASTER.wideRoundBtnText}>No account yet? Signup!</span>\n                </button>\n            </div>\n        </div>\n    )\n  };\n\n  const styles = {\n      container: {\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'center',\n          alignItems: 'center',\n          width: '100%',\n          height: '100%',\n          paddingTop: 40,\n      },\n      subcontainer: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n        height: '100%',\n        maxWidth: 400,\n    }\n  }\n  \n  export default Login;"]},"metadata":{},"sourceType":"module"}