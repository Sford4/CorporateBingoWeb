{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/Users/spencerford/Documents/DEVyall/PersonalProjects/CorporateBingoWeb/contexts/playContext.js\";\nvar __jsx = React.createElement;\nimport React, { createContext, useState, useEffect } from 'react';\nimport fetch from 'isomorphic-unfetch';\nimport FULL_URL from '../constants/constants';\nexport var PlayContext = createContext();\n\nvar PlayContextProvider = function PlayContextProvider(props) {\n  var _useState = useState({}),\n      contextGame = _useState[0],\n      setContextGame = _useState[1];\n\n  var getGame =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(gameID, userID) {\n      var request, game;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(gameID && contextGame._id === gameID)) {\n                _context.next = 3;\n                break;\n              }\n\n              console.log('go with same game', contextGame, gameID);\n              return _context.abrupt(\"return\");\n\n            case 3:\n              console.log({\n                gameID: gameID\n              });\n\n              if (!(gameID && userID)) {\n                _context.next = 19;\n                break;\n              }\n\n              _context.prev = 5;\n              _context.next = 8;\n              return fetch(\"\".concat(FULL_URL, \"/games/\").concat(gameID, \"/\").concat(userID), {\n                method: 'GET',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json',\n                  'Authorization': \"Bearer \".concat(localStorage.getItem('bingo_token'))\n                }\n              });\n\n            case 8:\n              request = _context.sent;\n              _context.next = 11;\n              return request.json();\n\n            case 11:\n              game = _context.sent;\n              console.log({\n                game: game\n              });\n              setContextGame(game);\n              _context.next = 19;\n              break;\n\n            case 16:\n              _context.prev = 16;\n              _context.t0 = _context[\"catch\"](5);\n              alert(_context.t0);\n\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[5, 16]]);\n    }));\n\n    return function getGame(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var saveGame =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(game) {\n      var request, success;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setContextGame(game);\n              console.log('SAVING GAME');\n              _context2.prev = 2;\n              _context2.next = 5;\n              return fetch(\"\".concat(FULL_URL, \"/games/\").concat(contextGame._id), {\n                method: 'PATCH',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json',\n                  'Authorization': \"Bearer \".concat(localStorage.getItem('bingo_token'))\n                },\n                body: _JSON$stringify(_objectSpread({}, game))\n              });\n\n            case 5:\n              request = _context2.sent;\n              _context2.next = 8;\n              return request.json();\n\n            case 8:\n              success = _context2.sent;\n              console.log({\n                success: success\n              });\n\n              if (success) {\n                setContextGame(success);\n              } else {\n                alert('There was a problem saving your board... please try again later!');\n              }\n\n              _context2.next = 16;\n              break;\n\n            case 13:\n              _context2.prev = 13;\n              _context2.t0 = _context2[\"catch\"](2);\n              alert(_context2.t0);\n\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[2, 13]]);\n    }));\n\n    return function saveGame(_x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(PlayContext.Provider, {\n    value: {\n      contextGame: contextGame,\n      updateGame: setContextGame,\n      getGame: getGame,\n      saveGame: saveGame\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, props.children);\n};\n\nexport default PlayContextProvider;","map":{"version":3,"sources":["/Users/spencerford/Documents/DEVyall/PersonalProjects/CorporateBingoWeb/contexts/playContext.js"],"names":["React","createContext","useState","useEffect","fetch","FULL_URL","PlayContext","PlayContextProvider","props","contextGame","setContextGame","getGame","gameID","userID","_id","console","log","method","headers","localStorage","getItem","request","json","game","alert","saveGame","body","success","updateGame","children"],"mappings":"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","sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\nimport fetch from 'isomorphic-unfetch';\nimport FULL_URL from '../constants/constants';\n\nexport const PlayContext = createContext();\n\nconst PlayContextProvider = (props) => {\n\n    const [ contextGame, setContextGame ] = useState({});\n\n    const getGame = async (gameID, userID) => {\n        if(gameID && contextGame._id === gameID){\n            console.log('go with same game', contextGame, gameID)\n            return;\n        }\n        console.log({gameID})\n        if(gameID && userID){\n            try {\n                const request = await fetch(`${FULL_URL}/games/${gameID}/${userID}`, {\n                    method: 'GET',\n                    headers: {\n                        'Accept': 'application/json',\n                        'Content-Type': 'application/json',\n                        'Authorization': `Bearer ${localStorage.getItem('bingo_token')}`\n                    },\n                    })\n                    const game = await request.json();\n                    console.log({game})\n                    setContextGame(game);\n            } catch(err) {alert(err)}\n        }\n    }\n\n    const saveGame = async (game) => {\n        setContextGame(game);\n        console.log('SAVING GAME');\n        try {\n            const request = await fetch(`${FULL_URL}/games/${contextGame._id}`, {\n                method: 'PATCH',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json',\n                  'Authorization': `Bearer ${localStorage.getItem('bingo_token')}`\n                },\n                body: JSON.stringify({\n                    ...game\n                })\n              })\n              const success = await request.json();\n              console.log({success})\n              if(success){\n                setContextGame(success);\n              } else {\n                  alert('There was a problem saving your board... please try again later!')\n              }\n\n        } catch(err) {alert(err)}\n        \n    }\n\n\n    return (\n        <PlayContext.Provider \n            value={{ \n                contextGame, \n                updateGame: setContextGame, \n                getGame, \n                saveGame\n            }}>\n            {props.children}\n        </PlayContext.Provider>\n    )\n}\n\nexport default PlayContextProvider;"]},"metadata":{},"sourceType":"module"}