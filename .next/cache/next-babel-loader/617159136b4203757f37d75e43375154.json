{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nvar _jsxFileName = \"/Users/spencerford/Documents/DEVyall/PersonalProjects/CorporateBingoWeb/pages/profile.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, useContext } from 'react'; // context imports\n\nimport { UserContext } from '../contexts/userContext'; // Style imports\n\nimport { MASTER } from '../../styles/masterStyles';\n\nconst EditUser = props => {\n  const {\n    user,\n    storeUser\n  } = useContext(UserContext);\n  const {\n    0: userName,\n    1: setUserName\n  } = useState(user.userName);\n  const {\n    0: email,\n    1: setEmail\n  } = useState(user.email);\n  const {\n    0: password,\n    1: setPassword\n  } = useState('');\n  const {\n    0: confirmPassword,\n    1: setConfirmPassword\n  } = useState('');\n\n  const openWarning = message => {\n    alert(`Woah there! ${message}`);\n  };\n\n  const validEmail = email => {\n    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n  };\n\n  const updateUser = async () => {\n    if (!userName) {\n      openWarning('Must have a username!');\n      return;\n    }\n\n    if (!email || !validEmail(email)) {\n      openWarning('Must have a valid email!');\n      return;\n    }\n\n    if (password && password !== confirmPassword) {\n      openWarning('Passwords must match!');\n      return;\n    }\n\n    try {\n      const request = await fetch(`http://localhost:8000/users/${user._id}`, {\n        method: 'PATCH',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('bingo_token')}`\n        },\n        body: _JSON$stringify({\n          _id: user._id,\n          userName,\n          email,\n          password,\n          role: {\n            org: props.orgID,\n            level: 2\n          }\n        })\n      });\n      const user = await request.json();\n      console.log('from backend', {\n        user\n      });\n\n      if (user && user._id) {\n        storeUser(user);\n      } else {\n        alert('There was a problem creating this user...');\n      }\n    } catch (err) {\n      alert(err);\n    }\n  };\n\n  const deleteUser = async id => {\n    if (confirm(`Are you sure? This will delete ${userName} forever!`)) {\n      try {\n        const request = await fetch(`http://localhost:8000/users/${user._id}`, {\n          method: 'DELETE',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${localStorage.getItem('bingo_token')}`\n          }\n        });\n        const response = await request.json();\n\n        if (response && response._id) {\n          props.updateUsers('delete', id);\n          props.openPopup(false, false);\n        } else {\n          alert('There was a problem deleting this user...');\n        }\n      } catch (err) {\n        alert(err);\n      }\n    }\n  };\n\n  return __jsx(\"div\", {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: styles.subcontainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, __jsx(\"input\", {\n    style: MASTER.wideRoundInput,\n    value: userName,\n    onChange: e => setUserName(e.target.value),\n    placeholder: 'User Name',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }), __jsx(\"input\", {\n    style: MASTER.wideRoundInput,\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    placeholder: 'Email',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }), __jsx(\"input\", {\n    style: MASTER.wideRoundInput,\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    type: \"password\",\n    placeholder: 'New Password',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }), __jsx(\"input\", {\n    style: MASTER.wideRoundInput,\n    value: confirmPassword,\n    onChange: e => setConfirmPassword(e.target.value),\n    type: \"password\",\n    placeholder: 'Confirm New Password',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    style: {\n      width: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, __jsx(\"button\", {\n    style: _objectSpread({}, MASTER.wideRoundBtn, {\n      backgroundColor: 'red',\n      marginTop: 20\n    }),\n    onClick: () => deleteUser(user._id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    style: MASTER.wideRoundBtnText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, \"Delete User\")), __jsx(\"button\", {\n    style: _objectSpread({}, MASTER.wideRoundBtn, {\n      marginTop: 20\n    }),\n    onClick: () => updateUser(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    style: MASTER.wideRoundBtnText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, \"Save\")))));\n};\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n    height: '100%',\n    paddingBottom: 10,\n    minWidth: 300\n  },\n  subcontainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n    height: '100%',\n    maxWidth: 400\n  }\n};\nexport default EditUser;","map":{"version":3,"sources":["/Users/spencerford/Documents/DEVyall/PersonalProjects/CorporateBingoWeb/pages/profile.js"],"names":["useState","useEffect","useContext","UserContext","MASTER","EditUser","props","user","storeUser","userName","setUserName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","openWarning","message","alert","validEmail","re","test","String","toLowerCase","updateUser","request","fetch","_id","method","headers","localStorage","getItem","body","role","org","orgID","level","json","console","log","err","deleteUser","id","confirm","response","updateUsers","openPopup","styles","container","subcontainer","wideRoundInput","e","target","value","width","display","flexDirection","alignItems","wideRoundBtn","backgroundColor","marginTop","wideRoundBtnText","justifyContent","height","paddingBottom","minWidth","maxWidth"],"mappings":"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","sourcesContent":["\n\nimport { useState, useEffect, useContext } from 'react';\n\n// context imports\nimport { UserContext } from '../contexts/userContext';\n\n// Style imports\nimport { MASTER } from '../../styles/masterStyles';\n\nconst EditUser = (props) => {\n\n    const { user, storeUser } = useContext(UserContext);\n\n    const [userName, setUserName] = useState(user.userName);\n    const [email, setEmail] = useState(user.email);\n    const [password, setPassword] = useState('');\n    const [confirmPassword, setConfirmPassword] = useState('');\n\n    const openWarning = (message) => {\n        alert(\n            `Woah there! ${message}`,\n        );\n    }\n\n    const validEmail = email => {\n        var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return re.test(String(email).toLowerCase());\n    }\n\n    const updateUser = async () => {\n        if(!userName){\n            openWarning('Must have a username!');\n            return;\n        }\n        if(!email || !validEmail(email)){\n            openWarning('Must have a valid email!');\n            return;\n        }\n        if(password && password !== confirmPassword){\n            openWarning('Passwords must match!');\n            return;\n        }\n        try {\n            const request = await fetch(`http://localhost:8000/users/${user._id}`, {\n                method: 'PATCH',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json',\n                  'Authorization': `Bearer ${localStorage.getItem('bingo_token')}`\n                },\n                body: JSON.stringify({\n                    _id: user._id,\n                    userName,\n                    email,\n                    password,\n                    role: {\n                        org: props.orgID,\n                        level: 2\n                    },\n                })\n              })\n              const user = await request.json();\n              console.log('from backend', {user})\n              if(user && user._id){\n                storeUser(user);\n              } else {\n                  alert('There was a problem creating this user...');\n              }\n        } catch (err) { alert( err ) }\n    }\n\n    const deleteUser = async id => {\n        if(confirm(`Are you sure? This will delete ${userName} forever!`)){\n            try {\n                const request = await fetch(`http://localhost:8000/users/${user._id}`, {\n                    method: 'DELETE',\n                    headers: {\n                      'Accept': 'application/json',\n                      'Content-Type': 'application/json',\n                      'Authorization': `Bearer ${localStorage.getItem('bingo_token')}`\n                    },\n                  })\n                  const response = await request.json();\n                  if(response && response._id){\n                    props.updateUsers('delete', id);\n                    props.openPopup(false, false);\n                  } else {\n                      alert('There was a problem deleting this user...');\n                  }\n            } catch (err) { alert( err ) }\n        }\n    }\n\n\n    return (\n        <div style={styles.container}>\n            <div style={styles.subcontainer}>\n                <input \n                    style={MASTER.wideRoundInput} \n                    value={userName} \n                    onChange={e => setUserName(e.target.value)} \n                    placeholder={'User Name'}\n                />\n                <input \n                    style={MASTER.wideRoundInput} \n                    value={email} \n                    onChange={e => setEmail(e.target.value)} \n                    placeholder={'Email'}\n                />\n                <input \n                    style={MASTER.wideRoundInput} \n                    value={password} \n                    onChange={e => setPassword(e.target.value)} \n                    type='password'\n                    placeholder={'New Password'}\n                />\n                <input \n                    style={MASTER.wideRoundInput} \n                    value={confirmPassword} \n                    onChange={e => setConfirmPassword(e.target.value)} \n                    type='password'\n                    placeholder={'Confirm New Password'}\n                />\n                <div style={{ width: '100%', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n                    <button \n                        style={{ ...MASTER.wideRoundBtn, backgroundColor: 'red', marginTop: 20 }} \n                        onClick={() => deleteUser(user._id)}\n                    >\n                        <span style={MASTER.wideRoundBtnText}>Delete User</span>\n                    </button>\n                    <button \n                        style={{ ...MASTER.wideRoundBtn, marginTop: 20 }} \n                        onClick={() => updateUser()}\n                    >\n                        <span style={MASTER.wideRoundBtnText}>Save</span>\n                    </button>\n                </div>\n            </div>\n        </div>\n    )\n  };\n\n  const styles = {\n    container: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n        height: '100%',\n        paddingBottom: 10,\n        minWidth: 300\n    },\n    subcontainer: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n        height: '100%',\n        maxWidth: 400,\n    }\n}\n  \n  export default EditUser;"]},"metadata":{},"sourceType":"module"}