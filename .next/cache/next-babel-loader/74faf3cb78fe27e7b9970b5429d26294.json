{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nvar _jsxFileName = \"/Users/spencerford/Documents/DEVyall/PersonalProjects/CorporateBingoWeb/pages/forgotPassword.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport fetch from 'isomorphic-unfetch';\nimport FULL_URL from '../constants/constants'; // context imports\n\nimport { UserContext } from '../contexts/userContext'; // Style imports\n\nimport { MASTER } from '../styles/masterStyles';\n\nconst ForgotPassword = () => {\n  const {\n    user\n  } = useContext(UserContext);\n  const router = useRouter();\n  const {\n    0: email,\n    1: setEmail\n  } = useState('');\n  const {\n    0: confirmationMessage,\n    1: setConfirmationMessage\n  } = useState(false);\n  useEffect(() => {\n    if (user._id && localStorage.getItem('bingo_token')) {\n      router.push('/joinGame');\n    }\n  }, [user]);\n\n  const submitEmail = async () => {\n    if (!email) {\n      alert('Must have a valid email!');\n      return;\n    }\n\n    const request = await fetch(`${FULL_URL}/users/forgotPassword`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: _JSON$stringify({\n        email\n      })\n    });\n    const success = await request.json();\n    console.log({\n      success\n    });\n\n    if (success.error) {\n      alert(`Yikes... ${success.error}`);\n      return;\n    }\n\n    if (!success) {\n      alert('Something went wrong... please try again later');\n      return;\n    }\n\n    setConfirmationMessage(true);\n  };\n\n  if (confirmationMessage) {\n    return __jsx(\"div\", {\n      style: styles.container,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      style: MASTER.pageTitle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"PASSWORD RESET\"), __jsx(\"div\", {\n      style: styles.message,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"Your password reset email has been sent, check your inbox!\"));\n  }\n\n  return __jsx(\"div\", {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: styles.subcontainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: MASTER.pageTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, \"PASSWORD RESET\"), __jsx(\"div\", {\n    style: styles.message,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"Submit your email address and we'll send you a password reset email.\"), __jsx(\"input\", {\n    style: MASTER.wideRoundInput,\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    placeholder: 'Email',\n    type: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    style: _objectSpread({}, MASTER.wideRoundBtn, {\n      marginTop: 20\n    }),\n    onClick: () => submitEmail(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    style: MASTER.wideRoundBtnText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"Submit\"))));\n};\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n    height: '100%',\n    paddingTop: 40\n  },\n  subcontainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n    height: '100%',\n    maxWidth: 400\n  },\n  message: {\n    textAlign: 'center',\n    marginTop: 10\n  }\n};\nexport default ForgotPassword;","map":{"version":3,"sources":["/Users/spencerford/Documents/DEVyall/PersonalProjects/CorporateBingoWeb/pages/forgotPassword.js"],"names":["useState","useEffect","useContext","useRouter","fetch","FULL_URL","UserContext","MASTER","ForgotPassword","user","router","email","setEmail","confirmationMessage","setConfirmationMessage","_id","localStorage","getItem","push","submitEmail","alert","request","method","headers","body","success","json","console","log","error","styles","container","pageTitle","message","subcontainer","wideRoundInput","e","target","value","wideRoundBtn","marginTop","wideRoundBtnText","display","flexDirection","justifyContent","alignItems","width","height","paddingTop","maxWidth","textAlign"],"mappings":";;;;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,UAA9B,QAAgD,OAAhD;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,QAAP,MAAqB,wBAArB,C,CAEA;;AACA,SAASC,WAAT,QAA4B,yBAA5B,C,CAEA;;AACA,SAASC,MAAT,QAAuB,wBAAvB;;AAEA,MAAMC,cAAc,GAAG,MAAM;AAEzB,QAAM;AAAEC,IAAAA;AAAF,MAAWP,UAAU,CAACI,WAAD,CAA3B;AAEA,QAAMI,MAAM,GAAGP,SAAS,EAAxB;AAEA,QAAM;AAAA,OAACQ,KAAD;AAAA,OAAQC;AAAR,MAAoBZ,QAAQ,CAAC,EAAD,CAAlC;AACF,QAAM;AAAA,OAACa,mBAAD;AAAA,OAAsBC;AAAtB,MAAgDd,QAAQ,CAAC,KAAD,CAA9D;AAEEC,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAGQ,IAAI,CAACM,GAAL,IAAYC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAf,EAAmD;AAC/CP,MAAAA,MAAM,CAACQ,IAAP,CAAY,WAAZ;AACH;AACF,GAJM,EAIJ,CAACT,IAAD,CAJI,CAAT;;AAME,QAAMU,WAAW,GAAG,YAAY;AAC9B,QAAG,CAACR,KAAJ,EAAU;AACNS,MAAAA,KAAK,CACH,0BADG,CAAL;AAGA;AACH;;AACC,UAAMC,OAAO,GAAG,MAAMjB,KAAK,CAAE,GAAEC,QAAS,uBAAb,EAAqC;AAC5DiB,MAAAA,MAAM,EAAE,MADoD;AAE5DC,MAAAA,OAAO,EAAE;AACP,kBAAU,kBADH;AAEP,wBAAgB;AAFT,OAFmD;AAM5DC,MAAAA,IAAI,EAAE,gBAAe;AACjBb,QAAAA;AADiB,OAAf;AANsD,KAArC,CAA3B;AAUE,UAAMc,OAAO,GAAG,MAAMJ,OAAO,CAACK,IAAR,EAAtB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY;AAACH,MAAAA;AAAD,KAAZ;;AACA,QAAGA,OAAO,CAACI,KAAX,EAAiB;AACbT,MAAAA,KAAK,CACA,YAAWK,OAAO,CAACI,KAAM,EADzB,CAAL;AAGA;AACH;;AACD,QAAG,CAACJ,OAAJ,EAAY;AACVL,MAAAA,KAAK,CACH,gDADG,CAAL;AAGA;AACD;;AACDN,IAAAA,sBAAsB,CAAC,IAAD,CAAtB;AACL,GAhCD;;AAkCA,MAAGD,mBAAH,EAAuB;AACrB,WAAQ;AAAK,MAAA,KAAK,EAAEiB,MAAM,CAACC,SAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACN;AAAK,MAAA,KAAK,EAAExB,MAAM,CAACyB,SAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADM,EAEN;AAAK,MAAA,KAAK,EAAEF,MAAM,CAACG,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oEAFM,CAAR;AAID;;AAEH,SACI;AAAK,IAAA,KAAK,EAAEH,MAAM,CAACC,SAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,KAAK,EAAED,MAAM,CAACI,YAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,KAAK,EAAE3B,MAAM,CAACyB,SAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,EAEI;AAAK,IAAA,KAAK,EAAEF,MAAM,CAACG,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4EAFJ,EAGI;AACI,IAAA,KAAK,EAAE1B,MAAM,CAAC4B,cADlB;AAEI,IAAA,KAAK,EAAExB,KAFX;AAGI,IAAA,QAAQ,EAAEyB,CAAC,IAAIxB,QAAQ,CAACwB,CAAC,CAACC,MAAF,CAASC,KAAV,CAH3B;AAII,IAAA,WAAW,EAAE,OAJjB;AAKI,IAAA,IAAI,EAAC,OALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHJ,EAWI;AACI,IAAA,KAAK,oBAAO/B,MAAM,CAACgC,YAAd;AAA4BC,MAAAA,SAAS,EAAE;AAAvC,MADT;AAEI,IAAA,OAAO,EAAE,MAAMrB,WAAW,EAF9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAII;AAAM,IAAA,KAAK,EAAEZ,MAAM,CAACkC,gBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJJ,CAXJ,CADJ,CADJ;AAuBD,CA/EH;;AAiFE,MAAMX,MAAM,GAAG;AACXC,EAAAA,SAAS,EAAE;AACPW,IAAAA,OAAO,EAAE,MADF;AAEPC,IAAAA,aAAa,EAAE,QAFR;AAGPC,IAAAA,cAAc,EAAE,QAHT;AAIPC,IAAAA,UAAU,EAAE,QAJL;AAKPC,IAAAA,KAAK,EAAE,MALA;AAMPC,IAAAA,MAAM,EAAE,MAND;AAOPC,IAAAA,UAAU,EAAE;AAPL,GADA;AAUXd,EAAAA,YAAY,EAAE;AACZQ,IAAAA,OAAO,EAAE,MADG;AAEZC,IAAAA,aAAa,EAAE,QAFH;AAGZC,IAAAA,cAAc,EAAE,QAHJ;AAIZC,IAAAA,UAAU,EAAE,QAJA;AAKZC,IAAAA,KAAK,EAAE,MALK;AAMZC,IAAAA,MAAM,EAAE,MANI;AAOZE,IAAAA,QAAQ,EAAE;AAPE,GAVH;AAmBbhB,EAAAA,OAAO,EAAE;AACLiB,IAAAA,SAAS,EAAE,QADN;AAELV,IAAAA,SAAS,EAAE;AAFN;AAnBI,CAAf;AAyBA,eAAehC,cAAf","sourcesContent":["import { useState, useEffect, useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport fetch from 'isomorphic-unfetch';\nimport FULL_URL from '../constants/constants';\n\n// context imports\nimport { UserContext } from '../contexts/userContext';\n\n// Style imports\nimport { MASTER } from '../styles/masterStyles';\n\nconst ForgotPassword = () => {\n\n    const { user } = useContext(UserContext);\n\n    const router = useRouter()\n\n    const [email, setEmail] = useState('');\n  const [confirmationMessage, setConfirmationMessage] = useState(false);\n\n    useEffect(() => {\n        if(user._id && localStorage.getItem('bingo_token')){\n            router.push('/joinGame');\n        }\n      }, [user])\n\n      const submitEmail = async () => {\n        if(!email){\n            alert(\n              'Must have a valid email!',\n            );\n            return;\n        }\n          const request = await fetch(`${FULL_URL}/users/forgotPassword`, {\n              method: 'POST',\n              headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({ \n                  email,\n              })\n            }) \n            const success = await request.json();\n            console.log({success})\n            if(success.error){\n                alert(\n                    `Yikes... ${success.error}`\n                  );\n                return; \n            }\n            if(!success){\n              alert(\n                'Something went wrong... please try again later',\n              );\n              return;\n            }\n            setConfirmationMessage(true);\n      }\n\n      if(confirmationMessage){\n        return (<div style={styles.container}>\n          <div style={MASTER.pageTitle}>PASSWORD RESET</div>\n          <div style={styles.message}>Your password reset email has been sent, check your inbox!</div>\n        </div>);\n      }\n\n    return (\n        <div style={styles.container}>\n            <div style={styles.subcontainer}>\n                <div style={MASTER.pageTitle}>PASSWORD RESET</div>\n                <div style={styles.message}>Submit your email address and we'll send you a password reset email.</div>\n                <input \n                    style={MASTER.wideRoundInput} \n                    value={email} \n                    onChange={e => setEmail(e.target.value)} \n                    placeholder={'Email'}\n                    type='email'\n                />\n                \n                <button \n                    style={{ ...MASTER.wideRoundBtn, marginTop: 20 }} \n                    onClick={() => submitEmail()}\n                >\n                    <span style={MASTER.wideRoundBtnText}>Submit</span>\n                </button>\n                \n            </div>\n        </div>\n    )\n  };\n\n  const styles = {\n      container: {\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'center',\n          alignItems: 'center',\n          width: '100%',\n          height: '100%',\n          paddingTop: 40,\n      },\n      subcontainer: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n        height: '100%',\n        maxWidth: 400,\n    },\n    message: {\n        textAlign: 'center',\n        marginTop: 10,\n    }\n  }\n  \n  export default ForgotPassword;"]},"metadata":{},"sourceType":"module"}