{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nvar _jsxFileName = \"/Users/spencerford/Documents/DEVyall/PersonalProjects/CorporateBingoWeb/pages/signup.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport fetch from 'isomorphic-unfetch';\nimport FULL_URL from '../constants/constants'; // context imports\n\nimport { UserContext } from '../contexts/userContext'; // Style imports\n\nimport { MASTER, COLORS } from '../styles/masterStyles';\n\nconst Signup = () => {\n  const {\n    user,\n    storeUser\n  } = useContext(UserContext);\n  const router = useRouter();\n  const {\n    0: userName,\n    1: setUserName\n  } = useState('');\n  const {\n    0: email,\n    1: setEmail\n  } = useState('');\n  const {\n    0: password,\n    1: setPassword\n  } = useState('');\n  const {\n    0: confirmPassword,\n    1: setConfirmPassword\n  } = useState('');\n  useEffect(() => {\n    if (user._id && localStorage.getItem('bingo_token')) {\n      router.push('/joinGame');\n    }\n  }, [user]);\n\n  const openWarning = message => {\n    alert(`Woah there! ${message}`);\n  };\n\n  const validEmail = email => {\n    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n  };\n\n  const signup = async () => {\n    if (!userName) {\n      openWarning('Must have a username!');\n      return;\n    }\n\n    if (!email || !validEmail(email)) {\n      openWarning('Must have a valid email!');\n      return;\n    }\n\n    if (!password || password !== confirmPassword) {\n      openWarning('Passwords must match!');\n      return;\n    }\n\n    try {\n      const request = await fetch(`${FULL_URL}/users/signup`, {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: _JSON$stringify({\n          userName,\n          email,\n          password,\n          role: {\n            org: null,\n            level: 3\n          }\n        })\n      });\n      const user = await request.json();\n      storeUser(user);\n    } catch (err) {\n      alert(err);\n    }\n  };\n\n  const goToLogin = () => {\n    router.push('/login');\n  };\n\n  return __jsx(\"div\", {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: styles.subcontainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: MASTER.pageTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"SIGNUP\"), __jsx(\"input\", {\n    style: MASTER.wideRoundInput,\n    value: userName,\n    onChange: e => setUserName(e.target.value),\n    placeholder: 'User Name',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }), __jsx(\"input\", {\n    style: MASTER.wideRoundInput,\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    placeholder: 'Email',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }), __jsx(\"input\", {\n    style: MASTER.wideRoundInput,\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    type: \"password\",\n    placeholder: 'Password',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }), __jsx(\"input\", {\n    style: MASTER.wideRoundInput,\n    value: confirmPassword,\n    onChange: e => setConfirmPassword(e.target.value),\n    type: \"password\",\n    placeholder: 'Confirm Password (passwords must match!)',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    style: _objectSpread({}, MASTER.wideRoundBtn, {\n      marginTop: 20\n    }),\n    onClick: () => signup(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    style: MASTER.wideRoundBtnText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, \"Sign up\")), __jsx(\"button\", {\n    style: _objectSpread({}, MASTER.wideRoundBtn, {\n      marginTop: 20\n    }),\n    onClick: () => goToLogin(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    style: MASTER.wideRoundBtnText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, \"Already have an account? Login!\"))));\n};\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n    height: '100%',\n    paddingTop: 40\n  },\n  subcontainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n    height: '100%',\n    maxWidth: 400\n  }\n};\nexport default Signup;","map":{"version":3,"sources":["/Users/spencerford/Documents/DEVyall/PersonalProjects/CorporateBingoWeb/pages/signup.js"],"names":["useState","useEffect","useContext","useRouter","fetch","FULL_URL","UserContext","MASTER","COLORS","Signup","user","storeUser","router","userName","setUserName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","_id","localStorage","getItem","push","openWarning","message","alert","validEmail","re","test","String","toLowerCase","signup","request","method","headers","body","role","org","level","json","err","goToLogin","styles","container","subcontainer","pageTitle","wideRoundInput","e","target","value","wideRoundBtn","marginTop","wideRoundBtnText","display","flexDirection","justifyContent","alignItems","width","height","paddingTop","maxWidth"],"mappings":"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","sourcesContent":["\n\nimport { useState, useEffect, useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport fetch from 'isomorphic-unfetch';\nimport FULL_URL from '../constants/constants';\n\n// context imports\nimport { UserContext } from '../contexts/userContext';\n\n// Style imports\nimport { MASTER, COLORS } from '../styles/masterStyles';\n\nconst Signup = () => {\n\n    const { user, storeUser } = useContext(UserContext);\n\n    const router = useRouter()\n\n    const [userName, setUserName] = useState('');\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [confirmPassword, setConfirmPassword] = useState('');\n\n    useEffect(() => {\n        if(user._id && localStorage.getItem('bingo_token')){\n            router.push('/joinGame');\n        }\n      }, [user])\n\n    const openWarning = (message) => {\n            alert(\n                `Woah there! ${message}`,\n            );\n    }\n\n    const validEmail = email => {\n        var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return re.test(String(email).toLowerCase());\n    }\n    \n    const signup = async () => {\n        if(!userName){\n            openWarning('Must have a username!');\n            return;\n        }\n        if(!email || !validEmail(email)){\n            openWarning('Must have a valid email!');\n            return;\n        }\n        if(!password || password !== confirmPassword){\n            openWarning('Passwords must match!');\n            return;\n        }\n        try {\n            const request = await fetch(`${FULL_URL}/users/signup`, {\n                method: 'POST',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    userName,\n                    email,\n                    password,\n                    role: {\n                        org: null,\n                        level: 3\n                    },\n                })\n              })\n              const user = await request.json();\n              storeUser(user);\n        } catch (err) { alert( err ) }\n        \n        \n    }\n\n    const goToLogin = () => {\n        router.push('/login');\n    }\n\n    return (\n        <div style={styles.container}>\n            <div style={styles.subcontainer}>\n                <div style={MASTER.pageTitle}>SIGNUP</div>\n                <input \n                    style={MASTER.wideRoundInput} \n                    value={userName} \n                    onChange={e => setUserName(e.target.value)} \n                    placeholder={'User Name'}\n                />\n                <input \n                    style={MASTER.wideRoundInput} \n                    value={email} \n                    onChange={e => setEmail(e.target.value)} \n                    placeholder={'Email'}\n                />\n                <input \n                    style={MASTER.wideRoundInput} \n                    value={password} \n                    onChange={e => setPassword(e.target.value)} \n                    type='password'\n                    placeholder={'Password'}\n                />\n                <input \n                    style={MASTER.wideRoundInput} \n                    value={confirmPassword} \n                    onChange={e => setConfirmPassword(e.target.value)} \n                    type='password'\n                    placeholder={'Confirm Password (passwords must match!)'}\n                />\n                <button \n                    style={{ ...MASTER.wideRoundBtn, marginTop: 20 }} \n                    onClick={() => signup()}\n                >\n                    <span style={MASTER.wideRoundBtnText}>Sign up</span>\n                </button>\n                <button \n                    style={{ ...MASTER.wideRoundBtn, marginTop: 20 }} \n                    onClick={() => goToLogin()}\n                >\n                    <span style={MASTER.wideRoundBtnText}>Already have an account? Login!</span>\n                </button>\n            </div>\n        </div>\n    )\n  };\n\n  const styles = {\n    container: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n        height: '100%',\n        paddingTop: 40,\n    },\n    subcontainer: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n        height: '100%',\n        maxWidth: 400,\n    }\n}\n  \n  export default Signup;"]},"metadata":{},"sourceType":"module"}